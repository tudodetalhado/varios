!function(){"use strict";var t=angular.module("sticky",[]);t.directive("sticky",["$window","$timeout",function(t,e){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function(n,i,o){function s(){b=n.calculateStickyContentInitialDimensions(),R&&(i[0].getBoundingClientRect().height||(k=n.$watch(function(){return i.height()},function(t){t>0&&(b=n.calculateStickyContentInitialDimensions(),A||k())})))}function r(e){var n=c(x,e);return 1===n.length?n[0]:t}function c(t,e){var n,i=[],o=e.parent();do{var s=o[0];if(1!==s.nodeType)break;if(s.tagName.toUpperCase()===t.toUpperCase())return o;n=o.parent(),o=n}while(0!==n.length);return i}function a(e){return"true"===e?t.innerHeight-(i[0].offsetHeight+parseInt(Y))<0:!1}function l(t,e,n){var i="top",o=Math.abs(t-e),s=Math.abs(t-n);return o>s&&(i="bottom"),i}function u(t){i.attr("style",N),T=!1,E.removeClass(W),i.removeClass(L),i.addClass(H),"top"===t?(i.removeClass($),i.css("z-index",10).css("width",i[0].offsetWidth).css("top",b.top).css("position",b.position).css("left",b.cssLeft).css("margin-top",b.marginTop).css("height",b.height)):"bottom"===t&&O===!0&&(i.addClass($),d(),i.css("z-index",10).css("width",i[0].offsetWidth).css("top","").css("bottom",0).css("position","absolute").css("left",b.cssLeft).css("margin-top",b.marginTop).css("margin-bottom",b.marginBottom).css("height",b.height)),C&&t===U&&C.remove()}function f(){T=!0,e(function(){b.offsetWidth=i[0].offsetWidth},0),E.addClass(W),i.removeClass(H),i.removeClass($),i.addClass(L),d(),i.css("z-index","10").css("width",i[0].offsetWidth+"px").css("position","fixed").css("left",i.css("left").replace("px","")+"px").css(U,Y+h(z)+"px").css("margin-top",0),"bottom"===U&&i.css("margin-bottom",0)}function d(){B&&(C&&C.remove(),C=angular.element("<div>"),C.css("height",i[0].offsetHeight+"px"),i.after(C))}function p(){return O&&g()>I?!0:!1}function h(t){var e=0;return t.getBoundingClientRect&&(e=t.getBoundingClientRect().top),e}function g(){var t;return t=void 0!==z.scrollTop?z.scrollTop:void 0!==z.pageYOffset?z.pageYOffset:document.documentElement.scrollTop}function m(){var e;return e=M[0]instanceof HTMLElement?t.getComputedStyle(M[0],null).getPropertyValue("height").replace(/px;?/,""):t.innerHeight,parseInt(e)||0}function v(){var e=o.mediaQuery||!1,n=t.matchMedia;return e&&!(n("("+e+")").matches||n(e).matches)}var y,C,S,k,b,w,x="sticky-scroll",I=0,T=!1,L=o.stickyClass||"",H=o.unstickyClass||"",W=o.bodyClass||"",$=o.bottomClass||"",z=r(i),D=angular.element(t),M=angular.element(z),E=angular.element(document.body),B="false"!==o.usePlaceholder,U="bottom"===o.anchor?"bottom":"top",O="true"===o.confine,R=void 0!==o.isStickyLayoutDeferred?"true"===o.isStickyLayoutDeferred:!1,A=void 0!==o.isStickyLayoutWatched?"true"===o.isStickyLayoutWatched:!0,P=i.css("position"),Y=o.offset?parseInt(o.offset.replace(/px;?/,"")):0,N=i.attr("style")||"",Q=function(){M.on("scroll",V),D.on("resize",n.$apply.bind(n,q)),s(),n.$watch(F,G),n.$on("$destroy",j)},V=function(){if(n.disabled===!0||v())return T&&u(),!1;var t,e=g();t="top"===U?O===!0?e>y&&I>=e:e>y:y>=e;var s=l(e,y,I);!t||a(o.stickLimit)||T?!t&&T?u(s,e):O&&!t&&(S=h(i[0]),u(s,e)):f(s)},j=function(){M.off("scroll",V),D.off("resize",q),E.removeClass(W),C&&C.remove()},q=function(){u(U),V()},F=function(){return n.disabled===!0?u():"top"===U?(S||h(i[0]))-h(z)+g():h(i[0])-m()+i[0].offsetHeight+g()},G=function(t,e){if(!(t===e&&void 0!==y||T||p()||0===t)){y=t-Y,O&&i.parent().css({position:"relative"});var n=i.parent()[0],o=parseInt(n.offsetHeight)-(B?0:i[0].offsetHeight),s=parseInt(i.css("margin-bottom").replace(/px;?/,""))||0,r=h(i[0]),c=h(n),a=h(z),l=r-a,u=c+o-r;I=l+u-i[0].offsetHeight-s-Y+ +g(),V()}};n.getElement=function(){return i},n.getScrollbar=function(){return z},n.getInitialCSS=function(){return b},n.getAnchor=function(){return U},n.isSticking=function(){return T},n.getOriginalInitialCSS=function(){return w},n.processUnStickElement=function(t){u(t)},n.processCheckIfShouldStick=function(){V()},n.calculateStickyContentInitialDimensions=function(){return{zIndex:i.css("z-index"),top:i.css("top"),position:P,marginTop:i.css("margin-top"),marginBottom:i.css("margin-bottom"),cssLeft:i.css("left"),height:i.css("height")}},n.updateStickyContentUpdateDimensions=function(t,e){t&&e&&(b.width=t+"px",b.height=e+"px")},e(function(){w=n.calculateStickyContentInitialDimensions(),Q()},0)},controller:["$scope","$window",function(t,e){this.resetLayout=function(n,i){function o(){"top"===c&&(s===e?e.scrollTo(0,0):s.scrollTop>0&&(s.scrollTop=0))}var s=t.getScrollbar(),r=t.getInitialCSS(),c=t.getAnchor();if(t.isSticking()&&(t.processUnStickElement(c),t.processCheckIfShouldStick()),t.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),r.position=t.getOriginalInitialCSS().position,delete r.offsetWidth,void 0===n&&void 0===i){var a=t.getElement()[0].getBoundingClientRect();n=a.width,i=a.height}t.updateStickyContentUpdateDimensions(n,i),o()},this.getScrollbar=function(){return t.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var t="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(t),function(){return{matches:!0}}}()}();